<!DOCTYPE html>
<html>
    <head>
        <title>
            Test Page
        </title>
        <script>
            function submitForm() {
                fetch("/wirekey", {
                    method: "POST"
                })
                .then(response => response.json())
                .then(data => {
                // Update DOM with scan results
                var resultsDiv = document.getElementById("results");
                resultsDiv.innerHTML = `
                    <h3>Keys:</h3>
                    <p><strong>Public Key:</strong> ${data.pubkey}</p>
                    <p><strong>Private Key:</strong> ${data.privkey}</p>
                `;
            })
                .catch(error => {
                    console.error('Error:', error);
                });
                
                return false; // Prevent default form submission
            }

            function createConfig() {
                var host = document.getElementById("mikrotikhost").value;
                var user = document.getElementById("mikrotikuser").value;
                var pass = document.getElementById("mikrotikpass").value;
                var formData = new FormData
                formData.append("mikrotikhost", host);
                formData.append("mikrotikuser", user);
                formData.append("mikrotikpass", pass);

                fetch("/wireconfig", {
                    method: "POST",
                    body: formData
                })
                .then(response => respones.json())
                .then(data => {
                    var configs = document.getElementById("configresult");
                    configs.innerHTML = `
                    <h3>Keys</h3>
                    <p><b>Public key: </b>${data.priv}
                    `
                })
                .catch(error => {
                    console.error('Error: ', error);
                });
            }
        </script>
    </head>
    <body>
        <p>
            <b>Ini halaman test, lu ngapain coba disini</b>
        </p>
        <p>
            <img src="/img/dreamybull-ambatukam.gif" alt="dreamybull-ambatukam">
        </p>
        <!-- <p>
            <form onsubmit="return submitForm();">
                <button type="submit">Generate Keys</button>
            </form>
        </p> -->
        <div id="results">
            <!-- Results will be displayed here -->
        </div>
        <div>
            <form onsubmit="return createConfig()">
                <label for="mikrotikhost">Mikrotik (Wireguard Server) IP Address</label>
                <input type="text" id="mikrotikhost" name="mikrotikhost">
                <label for="mikrotikuser">Mikrotik (Wireguard Server) User</label>
                <input type="text" id="mikrotikuser" name="mikrotikuser">
                <label for="mikrotikpass">Mikrotik (Wireguard Server) User Password</label>
                <input type="text" id="mikrotikpass" name="mikrotikpass">
                <button type="submit">Create configuration and send to server</button>
            </form>
        </div>
        <div id="configresult">
            <!-- Configuration results should be displayed here -->
        </div>
    </body>
</html>